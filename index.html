<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Market Sentiment Terminal</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #0b0f14;
    color: #ffffff;
}

h2 {
    color: #00ffd5;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}

th, td {
    padding: 10px;
    border-bottom: 1px solid #222;
    text-align: left;
}

th {
    background: #121822;
}

.positive {
    color: #00ff9c;
    font-weight: bold;
}

.negative {
    color: #ff4d4d;
    font-weight: bold;
}

.neutral {
    color: #cccccc;
}

.footer {
    margin-top: 15px;
    font-size: 12px;
    color: #888;
}
</style>
</head>

<body>

<h2>ðŸ“Š Live Market Sentiment Terminal</h2>

<table id="sentimentTable">
<thead>
<tr>
<th>Stock</th>
<th>Headline</th>
<th>Sentiment</th>
<th>Score</th>
<th>Confidence</th>
<th>Timestamp</th>
</tr>
</thead>

<tbody>
</tbody>
</table>

<div class="footer">
Auto-updated via FinBERT â€¢ Powered by GitHub Actions
</div>

<script>

async function loadCSV() {

    const response = await fetch("market_sentiment.csv");
    const data = await response.text();

    const rows = data.split("\n").slice(1);

    const tableBody = document.querySelector("#sentimentTable tbody");
    tableBody.innerHTML = "";

    rows.forEach(row => {

        const cols = row.split(",");

        if(cols.length < 6) return;

        let cls = "neutral";

        if(cols[2] === "POSITIVE") cls = "positive";
        if(cols[2] === "NEGATIVE") cls = "negative";

        tableBody.innerHTML += `
            <tr>
                <td>${cols[0]}</td>
                <td>${cols[1]}</td>
                <td class="${cls}">${cols[2]}</td>
                <td>${cols[3]}</td>
                <td>${cols[4]}</td>
                <td>${cols[5]}</td>
            </tr>
        `;
    });
}

// Initial load
loadCSV();

// Refresh every 60 seconds
setInterval(loadCSV, 60000);

</script>

</body>
</html>
